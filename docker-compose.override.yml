version: '3.8'

services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: docgus
      POSTGRES_USER: docgus
      POSTGRES_PASSWORD: docgus
    volumes:
      - db_data:/var/lib/postgresql/data
    ports:
      - '5432:5432'

  redis:
    image: redis:7
    ports:
      - '6379:6379'

volumes:
  db_data:

# Usage:
# 1) Start services: `docker compose up -d` (requires Docker 20.10+)
# 2) Set environment variables (example):
#    - DATABASE_URL=postgresql://docgus:docgus@localhost:5432/docgus
#    - RATELIMIT_STORAGE_URL=redis://localhost:6379/0
# 3) Run migrations: `pipenv run flask db upgrade`
# 4) Seed dev data: `pipenv run python tools/seed_dev.py`